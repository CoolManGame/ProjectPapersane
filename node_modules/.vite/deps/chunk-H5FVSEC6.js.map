{
  "version": 3,
  "sources": ["../../puppeteer-core/src/common/BrowserWebSocketTransport.ts"],
  "sourcesContent": ["/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {ConnectionTransport} from './ConnectionTransport.js';\n\n/**\n * @internal\n */\nexport class BrowserWebSocketTransport implements ConnectionTransport {\n  static create(url: string): Promise<BrowserWebSocketTransport> {\n    return new Promise((resolve, reject) => {\n      const ws = new WebSocket(url);\n\n      ws.addEventListener('open', () => {\n        return resolve(new BrowserWebSocketTransport(ws));\n      });\n      ws.addEventListener('error', reject);\n    });\n  }\n\n  #ws: WebSocket;\n  onmessage?: (message: string) => void;\n  onclose?: () => void;\n\n  constructor(ws: WebSocket) {\n    this.#ws = ws;\n    this.#ws.addEventListener('message', event => {\n      if (this.onmessage) {\n        this.onmessage.call(null, event.data);\n      }\n    });\n    this.#ws.addEventListener('close', () => {\n      if (this.onclose) {\n        this.onclose.call(null);\n      }\n    });\n    // Silently ignore all errors - we don't know what to do with them.\n    this.#ws.addEventListener('error', () => {});\n  }\n\n  send(message: string): void {\n    this.#ws.send(message);\n  }\n\n  close(): void {\n    this.#ws.close();\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAoBM,IAAO,4BAAP,MAAgC;EACpC,OAAO,OAAO,KAAW;AACvB,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAU;AACrC,YAAM,KAAK,IAAI,UAAU,GAAG;AAE5B,SAAG,iBAAiB,QAAQ,MAAK;AAC/B,eAAO,QAAQ,IAAI,0BAA0B,EAAE,CAAC;MAClD,CAAC;AACD,SAAG,iBAAiB,SAAS,MAAM;IACrC,CAAC;EACH;EAMA,YAAY,IAAa;AAJzB,kCAAA,IAAA,MAAA,MAAA;AAKE,2BAAA,MAAI,+BAAO,IAAE,GAAA;AACb,2BAAA,MAAI,+BAAA,GAAA,EAAK,iBAAiB,WAAW,WAAQ;AAC3C,UAAI,KAAK,WAAW;AAClB,aAAK,UAAU,KAAK,MAAM,MAAM,IAAI;;IAExC,CAAC;AACD,2BAAA,MAAI,+BAAA,GAAA,EAAK,iBAAiB,SAAS,MAAK;AACtC,UAAI,KAAK,SAAS;AAChB,aAAK,QAAQ,KAAK,IAAI;;IAE1B,CAAC;AAED,2BAAA,MAAI,+BAAA,GAAA,EAAK,iBAAiB,SAAS,MAAK;IAAE,CAAC;EAC7C;EAEA,KAAK,SAAe;AAClB,2BAAA,MAAI,+BAAA,GAAA,EAAK,KAAK,OAAO;EACvB;EAEA,QAAK;AACH,2BAAA,MAAI,+BAAA,GAAA,EAAK,MAAK;EAChB;;;",
  "names": []
}
